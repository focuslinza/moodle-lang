<h1>安装 Moodle</h1>
<h2>别害怕! <img src="http://moodle.org/pix/s/smiley.gif" /></h2>
<blockquote>
  <p>这个安装向导将解释首次如何安装 Moodle 。 对于一些步骤它讨论许多细节，而且尝试和覆盖尽可能多的网络服务设备，因此，这份文件可能看起来很长很复杂。 别紧张,您将知道如何在几分钟中安装 Moodle !</p>
  <p>如果遇到问题请仔细地读这一份文件 --- 这里包括一般的解决方法。 如果您仍然有麻烦,您能求助于 
   <a target="_blank" href="http://moodle.org/help">Moodle 帮助</a></p>
  <p>别的解决方法是连络一家 <a target="_blank" href="http://moodle.com/hosting/">网络主机租贷公司</a>
     ，他们能为您提供全面的 Moodle 维护,所以您可以不理这一切，直接进入教学！</p>
  <p>&nbsp;  </p>
  <p>这份文件的分段:</p>
  <ol>
    <li><a href="#requirements">需求</a></li>
    <li><a href="#downloading">下载和复制文件</a> </li>
    <li><a href="#site">网络建构</a></li>
    <li><a href="#installer">运行安装脚本和创建 config.php</a>      <ul>
        <li><a href="#webserver">检查网络服务器设定</a></li>
        <li><a href="#database">创建数据库</a></li>
        <li><a href="#data">创建数据目录</a></li>
        </ul>
    </li>
    <li><a href="#admin">转向管理页并继续建构</a></li>
    <li><a href="#cron">建立 cron</a></li>
    <li><a href="#course">创建新的课程</a></li>
  </ol>
  <p>&nbsp;</p>
</blockquote>
<h3 class="sectionheading"><a name="requirements"></a>1. 需求</h3>
<blockquote> 
  <p>Moodle 主要在Linux下使用Apache， MySQL 和 PHP( 有时如已知的LAMP platform) 而发展, 但是也经常与 PostgreSQL 一起在Windows XP，Mac OS X and Netware 6 操作系统上运行 <br />
  </p>
  <p>关于Moodle 的要求如下:</p>
  <ol>
    <li>网络服务器软件。 大多数人使用 <a href="http://www.apache.org/" target="_blank">Apache</a>, 
      但是 Moodle 在任何的网络服务器下运行良好并支持 PHP, 像是Windows平台上的 IIS 。 <br />
    </li>
    <li><a href="http://www.php.net/" target="_blank">PHP</a>脚本语言(4.1.0 版或更高版本)  Moodle 1.4.支持PHP 5</li>
    <li>一个工作着数据库服务器器: 为使用Moodle ，支持和推荐使用 <a href="http://www.mysql.com/" target="_blank">MySQL</a>或<a href="http://www.postgresql.org/" target="_blank">PostgreSQL</a>。</li>
  </ol>
  <p>大部分webhosts都默认支持这些特征。 如果您与不支持这些特征的少数 webhosts 之一签约，问他们为什么, 而且考虑把您的生意转向其它地方。<br />
  </p>
  <p>I如果您想使运行在个人计算机上的 Moodle ，并且这一切看起来有点问题,请看一看 <a href="http://docs.moodle.org/en/Administrator_documentation">管理文件</a>.</p>
  <p>&nbsp;</p>
</blockquote>
<h3 class="sectionheading"><a name="downloading"></a>2. 下载和复制文件到本地 </h3>
<blockquote>
  <p>有二种方法下载 Moodle, 作为被压缩的包裹和经由 CVS。 在下载页上有的解释:<a href="http://moodle.org/download/" target="_blank">http://moodle.org/download/</a></p>
  <p>下载和解压文件之后, 或检查via CVS文件,将有叫做 &quot; moodle&quot; 的目录出现,其中包含若干文件和文件夹。</p>
  <p>您能把整个文件夹放在您的网络服务器目录中，这样设置将被定位于<b>http://yourwebserver.com/moodle</b>, 
    或者直接复制所有的内容放进服务器目录，这种情形位置将仅是 <b>http://yourwebserver.com</b>.</p>
  <p>如果您的本地计算机的正在下载 Moodle， 然后上传到您的网站,通常上传整个文件较好, 在服务器上卸载。 甚至设圈套像 Cpanel 的主机租贷接口允许您们不压缩文件在那 &quot; 文件经理&quot;. <br />
  </p>
</blockquote>
<p>&nbsp;</p>
<h3 class="sectionheading"><a name="site"></a>3. 位置结构</h3>
<blockquote>
  <p>您能安全地跳过这一阶段，但是这里是 Moodle 文件夹内容的摘要, 帮助您设置定向:<br />
  </p>
  <blockquote>
    <table><tr>
      <td width="130" valign="top">config.php</td>
      <td valign="top">-</td>
      <td valign="top">
        包含基本设定。 这个文件不会影响到 Moodle  - 您可以创建它。</td>
    </tr>
      <tr>
        <td valign="top">install.php</td>
        <td valign="top">-</td>
        <td valign="top">您运行的脚本将创建config.php</td>
      </tr>
      <tr><td valign="top">version.php</td>
      <td valign="top">-</td>
      <td valign="top">
        定义 Moodle当前版本的密码</td>
      </tr>
      <tr><td valign="top">index.php</td>
      <td valign="top">-</td>
      <td valign="top">
        设置的首页</td>
      </tr></table>
    <ul>
      <li>管理/- 编码管理整个服务器<br />
        auth/- 证明使用者的网络设备组件<br />
        区段/- 在许多页面中的区段设置模型<br />
        日历/- 管理和显示日历<br />
        课程/- 显示与处理课程<br />
        文件/-  Moodle 帮助文件的 ( 例如本页)<br />
        文件/- 显示并处理上传文件<br />
        lang/- 不同语言的文本, 每个语言一个目录<br />
        lib/- Moodle 核心图书馆的密码<br />
        登录/- 登录与创建帐户<br />
        mod/- 所有的主要 Moodle 课程组件都在这里<br />
        pix/- 一致的位置图形<br />
        主题/- 主题包裹/ 改变设置的皮肤与外观。 <br />
      使用者/- 显示和管理使用者</li>
      </ul>
    <p>&nbsp;</p>
  </blockquote>
</blockquote>
<h3 class="sectionheading"><a name="installer"></a>4. 运行安装脚本创建config.php </h3>
<blockquote>
  <p>为了运行安装脚本(install.php),试着使用一个网络浏览器运行您的Moodle主要网址 , 或直接用通道 http:// yourserv/install.php </p>
  <p>(安装设置将会设定一系列提示。 如果浏览器给您警告，确定您接受提示!) </p>
  <p>Moodle 将发现结构是必需的，并通过窗口帮助您创建一个新config.php 文件。 在 Moodle进程结束时，将文件写入正确的位置,您也可以通过按钮从安装程序上下载，上传 config.php到服务器上的主要 Moodle 目录 。 </p>
  <p>安装过程将会测试您的服务器环境，并提议该如何解决问题。对于大部分常见的问题，这些建议是可行的，但是如果您停滞不前了,查找更多的常见问题帮助，可能让您继续进行下去。<br />
  </p>
</blockquote>
<blockquote>

<h3 class="sectionheading"><a name="webserver" id="webserver"></a>4.1 常见的服务器设定 </h3>
  <blockquote>
    <p>第一, 确定您的网络服务器的建立是为了使用 index.php 作为默认页.( 也许除了 index.html ， default.htm 之外其它也可以)之上</p>
    <p>在Apache中，这被做使用您的 httpd.conf 文件的一个 DirectoryIndex 叁数。 看起来像这样:</p>
    <p>DirectoryIndex index.php index.html index.htm<br />
      只要确定 index.php 在目录中。 ( 为了提高效率，最好接近目录的开端)</p>
    <p>第二，如果您正在使用Apache 2,您打开 AcceptPathInfo 变数,允许脚本通过像 http:// server/file.php/arg1/arg2 的质疑。 这对于您资源之间的联系非常重要, 并且提供一个表现值给使用您的 Moodle 网站的人。 您可以经过这些连接，加入到您的 httpd.conf 文件，把这打开。</p>
    <p>AcceptPathInfo <br />
      第三， Moodle 需要若干的 PHP 设定激活它的工作。 在大多数的服务器上这些已经是设定的默认值。 然而，一些 PHP 服务器 ( 和一些较新的 PHP 版本) 可能设定不同。 在 PHP's 结构文件中进行定义:( 通常叫做 php.ini)</p>
    <p>magic_quotes_gpc=1    ( 推荐但不是必需)<br />
      magic_quotes_runtime=0    (必需)<br />
      file_uploads=1<br />
      session.auto_start=0<br />
      session.bug_compat_warn=0<br />
      <br />
      如果您没有机会接近在您服务器上的 httpd.conf 或 php.ini,如果需要有不同的设定，您的Moodle其他的申请在一个服务器上,别担心,您可以常常忽略默认设置。 </p>
    <p>这样，您需要创建一个访问的文件。在Moodle的主要目录的 htaccess中包含以下各项。 这只在Apache服务器上工作并且只有当忽略的时候才被允许的主要结构。 </p>
    <p>DirectoryIndex index.php index.html index.htm</p>
    <p>&lt;IfDefine APACHE2&gt;<br />
      AcceptPathInfo 在<br />
  &lt;/IfDefine&gt;</p>
    <p>php_flag magic_quotes_gpc 1<br />
      php_flag magic_quotes_runtime 0<br />
      php_flag file_uploads 1<br />
      php_flag session.auto_start 0<br />
      php_flag session.bug_compat_warn 0<br />
      您也能为上传的文件定义最大量值: </p>
    <p>LimitRequestBody 0<br />
      php_value upload_max_filesize 2 M<br />
      php_value post_max_size 2 M<br />
      <br />
      最简单的事情就是从lib/ htaccess 文件中复制相同的文件并进行编辑使它适合您的需要。 包含较进一步的说明。 例如,在一个 Unix 中: </p>
    <p>cp lib/ htaccess 。htaccess</p>
    <blockquote>&nbsp;</blockquote>
  </blockquote>
<p>&nbsp;</p>
<h3 class="sectionheading"><a name="database"></a>4.2 创建一个数据库</h3>

  <blockquote>
    <p>您需要创建一个空数据库( 例如&quot; moodleuser&quot;) ，您的数据库属于个别与数据库相关的使用者 ( 和数据库唯一相关的)。 如果您想检测服务器，您可使用 &quot; root &quot; ，但是产品系统不推荐这样推荐: 如果 hackers 设法发现密码，您的整个数据库系统会处于险境, 还不如只是一个数据库。 </p>
    <p>如果您正在使用 webhost, 他们或许会控制网络接口让您创建您的数据库。 </p>
    <p>Cpanel 系统是最流行之一。 在Cpanel上创建 的一个数据库,</p>
    <p>点击 <strong>&quot;MySQL Databases&quot;</strong>镜像 。 <br />
      在数据领域输入 &quot; moodle&quot; ，点击<strong>“增加数据库” </strong>按钮 。 <br />
      在有关领域输入用户名和密码( 您没有在其他地方使用)并点击<strong>“添加用户”</strong> 。 <br />
      现在点击 <strong>&quot; 把用户加入数据库”</strong>按钮给这个新用户帐户对数据库 <strong>&quot; 所有”</strong>权利。 <br />
      注意用户名和数据库名称可能成为您的 Cpanel 帐户名字前缀。 当在Moodle 安装输入这些信息 的时候 - 使用全名。 <br />
    如果您对Unix 指令线有所接触 , 您能藉由打字指令做相同的事情。 </p>
    <p>这里举一些Unix 对 MySQL指令的例子 : </p>
    <p> # mysql -u root -p<br />
  &gt;创建moodle数据库; <br />
  &gt; 授与选择,插入,更新,删除,产生,降低,编入索引,在 moodle 上改变。*<br />
      到被 'yourpassword' 识别的 moodleuser@localhost; <br />
  &gt; 离开<br />
      # mysqladmin -p reload<br />
  <br />
      对PostgreSQL指令</p>
    <p> # su - postgres<br />
  &gt; psql -c &quot;创建用户 moodleuser createdb;&quot; template1<br />
  &gt; psql -c &quot;创建数据库 moodle;&quot; -U moodleuser template1<br />
  &gt; psql -c &quot;改变用户moodleuser nocreatedb;&quot; template1</p>
  </blockquote>
  <p>&nbsp;</p>
  
<h3 class="sectionheading"><a name="data"></a>4.3 创造一个数据指南 </h3>

  <blockquote>
    <p>Moodle 也需要在您的服务器硬盘的储存空间中保存文件, 例如课程文件和用户照片。 </p>
    <p>Moodle 设置尽力为您创建指南，但是如果它失败 , 您将必须手动创建这个指南。 </p>
    <p>对于安全性，最好这个目录不直接经由网络连接。最容易的方法是只在网络目录之外定位它, 但是如果您需要它，在目录中创建叫做数据目录的一个文件保护它。htaccess,包含这条: </p>
    <p>allAllowOverride 否认一切<br />
      确定 Moodle 能在目录中保存了这个上传的文件,检查网络服务器上的软件 (例如Apache) 在这一目录中可读, 可运行。 </p>
    <p>在 Unix 机器上，这意谓设定目录的拥有者对于某事，喜欢 &quot; 没人 &quot; 或 &quot; 游客&quot;, 然后给这个使用者阅读,写作和运行的权利。</p>
    <p>在 Cpanel 系统上您能使用 &quot;File Manager&quot; 找到文件夹,点击它 , 然后选择 &quot;Change Permissions&quot;. 在有很多分享的主机服务器上, 您可能需要限制所有的文件接触您的 &quot; 组&quot;, 但是提供完整的阅读/ 写作通道给其他人。 ( 这些通道将允许网络服务器存取您的文件) </p>
    <p>如果您安全设定有麻烦，跟您的服务器管理者沟通。在个别项目中，使用一个具有PHP 特征的&quot; 安全模式&quot; ，可能需要管理者适当地为您在这个位置中创建一个目录。 <br />
    </p>
  </blockquote>

</blockquote>

<h3 class="sectionheading"><a name="admin"></a>5. 切换到主页继续建构 </h3>
<blockquote> 
  <p>一些基本的 <strong>config.php</strong>已经正确地在早先步骤中产生, 尝试把最前页比较其它部分而言作为“管理”页。<br />
  </p>
  <p>第一次进入首页,在您安装之前 , GPL 将呈现 &quot; shrinkwrap&quot; 的协议给您，要求您<strong>一定</strong>同意的协议。</p>
  <p>现在 Moodle 开始建立您的数据库并且创造表格储存数据。 第一，产生主要的数据库表格。 您们应该见到跟随若干数字信息( 绿色或红色) 的 SQL 陈述:</p>
  <blockquote> 
    <p>CREATE TABLE course ( id int(10) unsigned NOT NULL auto_increment, category 
      int(10) unsigned NOT NULL default '0', password varchar(50) NOT NULL default 
      '', fullname varchar(254) NOT NULL default '', shortname varchar(15) NOT 
      NULL default '', summary text NOT NULL, format tinyint(4) NOT NULL default 
      '1', teacher varchar(100) NOT NULL default 'Teacher', startdate int(10) 
      unsigned NOT NULL default '0', enddate int(10) unsigned NOT NULL default 
      '0', timemodified int(10) unsigned NOT NULL default '0', PRIMARY KEY (id)) 
      TYPE=MyISAM</p>
    <p><font color="#006600">成功</font></p>
  </blockquote>
  <p>。。。等等,接下来:<font color="#006600">成功地建立主要数据库。</font> </p>
  <blockquote>
    <p align="left">如果您没看到这些,可能是数据库或者您在 config.php 中定义的结构设定有问题。  检查 PHP 不是在一个限制性的 &quot; 安全模式&quot;.( 商业网主人有时会打开“安全模式”) 您可以创建一个包含<strong>&lt;?php phpinfo?()&gt;</strong>的小文件并且通过浏览器看这个文件以检查 PHP变量 。 检查所有这些，再一次尝试这页。滚动到该页的最底部，点击&quot;  继续 &quot; 按钮。<br />
    您现在应该看到一种能为您的安装定义更多结构变量, 例如假设值语言，  SMTP 主人等的形式。 现在不要急着让每个地方都设置正确-您可以稍后返回来并使用管理接口进行编辑。 假设值对大部分网站是有用和安全的。 滚动到底部，点击  &quot; 保存更改&quot;.</p>
    <p class="style3">如果  ( 而且只要) 您在这页上遇到阻碍, 不能继续,您的服务器或许存在所谓的 &quot; buggy referrer&quot; 的问题。 这是容易更改的: 只要关掉  &quot; secureforms&quot; 设定,然后继续。</p>
  </blockquote>
  <blockquote>&nbsp;</blockquote>
  <p>接下来您将会看到更多的页面，这些页面有各种状态信息，因为它们建立了各种不同的Moodle模块要求的所有标签。在此之前,他们应该全部是<font color="#006600">绿色</font>.</p>
  <p align="left">滚动到该页页的最底部，点击&quot; 继续 &quot; 链接。</p>
  <p align="left"><br />
    下页是一种您能为您的 Moodle 网站和前面的页面定义参数，例如名字，格式，描述等等的形式。  填充这外面的 ( 您可以经常返回并对这些进行修改。) 然后点击&quot; 保存修改&quot;.</p>
  <p>&nbsp;</p>
  <p>最后，您可能被要求为未来访问管理页创建生一个高水平的管理员。  填写您自己的名字, 电子邮件等这些细节然后点击 &quot; 保存修改&quot;. 不是所有的领域都要求这样，但是如果您漏掉任何重要领域 , 您将重新填写。</p>
  <blockquote> 
    <blockquote> 
      <blockquote> 
        <blockquote> 
          <blockquote> 
            <p><strong>确定您记得您为管理员帐户选择的用户名和密码,因为在将来访问管理页面时用户名和密码是必须的</strong>。</p>
          </blockquote>
        </blockquote>
      </blockquote>
    </blockquote>
    <p class="style3">(如果您的安装被打断,  或有一些类型的系统错误阻止您使用管理帐号登陆，您可以使用假设的用户名和密码<strong>“admin”</strong>登陆。）</p>
  </blockquote>
  <p>一旦成功,您将回到您的新站点的首页!  注意出现在页面左下方的管理链接-(这些项目也在一个分开的管理页上出现) 因为您以管理员身份登陆，这些项目只对您是可见的。 可以使用以下菜单对Moodle进行进一步的管理，例如</p>
  <ul>
    <li>创建和删除课程</li>
    <li>创建，编辑使用者解释用户帐号</li>
    <li>管理老师帐号</li>
    <li>修改网站主题等的设置</li>
  </ul>
  <p align="left">但是您仍没完成安装! 还有一件非常重要的事要做。 (见下一区段）</p>
  <p>&nbsp;</p>
</blockquote>
<p>&nbsp;</p>
<h3 class="sectionheading"><a name="cron"></a>6. 建立 cron-- 重要! </h3>
<blockquote> 
  <p>一些 Moodle 的组件需要持续不断的检查运行工作。 例如， Moodle 需要检查论坛，因而它能对已经订购的人邮寄副本。</p>
  <p>所有这些脚本管理目录, 称为 cron.php 。 然而，它自身不能运行，因此，您需要建立一个机制保证这个脚本规律运作。 ( 比如每五或十分钟一次) 提供一个 &quot; 心跳 &quot; ，以便脚本能在每个组件定义的周期内实现功能。 这种规则的机制即是 <strong>cron 维修</strong>。 </p>
  <p>注意运行cron 的机制<strong>不需要是正在运行 Moodle 的相同机制</strong>。 例如，如果您有一个有限制的主机租贷服务，但是没有cron 服务,您可能选择在另一个服务器或您的个人计算机上运行 cron 。 所有这一切都被叫做 cron.php 文件。 </p>
  <p>这一个脚本的负重不是很大，因此， 5 分钟通常是合理的, 但是如果您感到担忧 , 您能减少时间到 15 分钟甚至 30 分钟。 是设定的时间最好不要太长, 邮件延迟的时候 - 课程进度也会变慢。</p>
  <p>首先, 借助您的浏览器测试您的脚本工作:<br />
  </p>
  <blockquote> 
    <pre>http://example.com/moodle/admin/cron.php</pre>
  </blockquote>
  <p>现在，您需要建立能过自动地并经常地运行脚本的一些方法。</p>
  <p><b>在窗口系统中</b></p>
  <blockquote>
    <p>最简单的方法是使用这个小压缩包 <a href="http://moodle.org/download/modules/moodle-cron-for-windows.zip" title="Click to download this package (150k)" target="_blank"><strong>moodle-cron-for-windows.zip</strong></a>服务使整个过程变的很容易。让它运作，以后也不必管它!<br />
    </p>
  </blockquote>
  <p><strong>网络主机服务</strong></p>
  <blockquote>
    <p>您的网络控制面板可能有一个允许您建立这 cron 程序的网页。 例如，在 Cpanel 系统中，找寻一个叫做 “ Cron jobs”的按钮 。 这里您可以像前面在Unix中那样放入相同的指令。 <br />
    </p>
  </blockquote>
  <h4> 在 Unix 中使用命令 </h4>
  <blockquote>
    <p>用多种不同的指令项目供您选用。 在一个给定的服务器上并不是所有的指令都可用。</p>
    <p>例如，您能使用一个 和'wget'相似的Unix 公用程序:</p>
    <p>wget -q -O /dev/null<br />
      example.com/moodle/admin/cron.php<br />
      在这个例子中注意输出被抛弃to /dev/null).</p>
    <p>使用lynx相同的例子:</p>
    <p>lynx -dump http://example.com/moodle/admin/cron.php &gt; /dev/null<br />
      二者选一，您可以使用一个 PHP 标准版,编译时涉及指令行。 这样做的用利之处在于，您的网络服务器不会装满对 cron.php 的持续请求。 缺点是您需要通过一个 php 的版本指令。</p>
    <p>/opt/ bin/php /web/moodle/admin/cron.php</p>
    <blockquote>&nbsp;</blockquote>
  </blockquote>
  <h4>在 Unix 上使用 crontab项目 </h4>
  <blockquote>
    <p>所有的 Cpanel 都为Unix的公用程序crontab提供一个网络接口。 如果您有指令行,您可以自己使用指令建立 crontab :</p>
    <p>crontab-e<br />
      然后增加上述的类似指令之一:</p>
    <p>*/5 * * * * wget -q -O /dev/null http://example.com/moodle/admin/cron.php<br />
      通常,&quot; crontab&quot; 指令会使您进入 'vi' 编辑器。按 &quot; i&quot;键 进入 &quot;insert mode&quot; ，然后输入上面的字符,然后ESC 键退出。 您输入&quot;:wq&quot;退出并保存, 或不需要保存就离开 &quot;:q&quot;! (没有引证).<br />
    </p>
  </blockquote>
  <p>&nbsp;</p>
</blockquote>
<h3 class="sectionheading"><a name="course"></a>7. 创建新的课程</h3>
<blockquote>
  <p>现在 Moodle 可以正常运行,您可以尝试创建新的课程。 </p>
  <p>从管理页选择 &quot; 产生新的课程 &quot; 。 ( 或在首页上的管理联接)</p>
  <p>填写表格,特别注意课程格式。 在这一阶段您不必为细节担忧,老师过后还能对着一切进行修改。 注意黄色的帮助区在任何时候都能对各方面的难题给予解答。 </p>
  <p>点击 &quot;Save changes&quot;, 您将进入一个新的表格，在这里将老师分配到课程当中。 您只能在这个表格中增加用户帐户-如果您想增加一位新的教师帐户或要求老师为自己创建一个, 或通过&quot;Add a new user&quot; 为他们新增一个 。</p>
  <p>完成之后,课程准备好, 而且通过&quot; 课程 &quot; 可进入首页上的联接。<br />
  </p>
  <p><br />
    关于更多细节参考&quot;<a href="http://docs.moodle.org/en/Teacher_documentation">Teacher Documentation</a>&quot; 的课程建构。</p>
  <p>&nbsp;</p>
  <p align="center"><br />
  快乐的探究和快乐的魔灯!</p>
  <p align="center"><strong><br />
  如果您喜欢 Moodle,请考虑<a href="http://moodle.org/donations/" target="_blank">捐赠，</a> 帮助我们并分担我们的费用!</strong></p>
  <p align="right">上海师范大学<br />
    梁晓晖译<br />
    Email:xiaohuilang1983@hotmail.com<br />
    罗丹校<br />
    Email:luodan0119@hotmail.com<br />
  </p>
  <p align="center">&nbsp;</p>
</blockquote>