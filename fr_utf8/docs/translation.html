<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<title>Documentation Moodle : Guide de traduction de Moodle</title>

<link rel="stylesheet" href="docstyles.css" type="text/css" />

<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />

	<style type="text/css">
		<!--
		ol {margin-left:80px;}
		-->
	</style>

</head>

<body style="background-color: #ffffff;">

<h1>Guide de traduction de Moodle</h1>

<p>La traduction de Moodle n'est pas si difficile. Avant de commencer, il est cependant sage de connaître certaines informations.</p>

<h2>Structure des paquetages de langue de Moodle</h2>

<p style="margin-left: 40px;">Les différentes traductions sont situées dans le dossier <strong>lang</strong>, chaque langue dans un dossier unique dont le nom est le même que celui de l'abbréviation de la langue : fr, fr_CA, en, de, it, es, ...</p>

<p style="margin-left: 40px;">Les fichiers principaux sont situés directement dans ce dossier, et se terminent tous par l'extension « .php », par exemple moodle.php, resource.php, etc. Ces fichiers contiennent des expressions plus ou moins courtes, appelées le plus souvent « <em>chaînes de caractères</em> » ou tout simplement « <em>chaînes</em> ».</p>

<p style="margin-left: 40px;">Certains dossiers contiennent des fichiers avec l'extension « .html » (des pages web) : </p>

<ul style="margin-left: 40px;">

<li><strong>help</strong> : contient les fichiers d'aide contextuelle qui s'ouvrent lorsque l'on clique sur les icônes d'aide de Moodle ;</li>

<li><strong>docs</strong> : contient les fichiers de la documentation de base (comme celui-ci !)</li>

</ul>

<h2>Création d'une toute nouvelle langue pour Moodle</h2>

<p style="margin-left: 40px;">Si votre langue n'est pas encore traduite dans Moodle, ou si vous voulez juste apporter quelques personnalisations à l'interface de votre site, vous pouvez commencer une nouvelle traduction.</p>

<p style="margin-left: 40px;">Pour ce faire, commencez par créer un nouveau dossier dans le dossier <strong>lang</strong> en utilisant pour son nom le code à 2 lettres de votre langue. Ces codes standard sont décrits dans le fichier <strong>lib/languages.php</strong>. Si vous faites simplement une adaptation locale d'une autre langue, utilisez comme nom le code de cette langue, suivi d'un caractère souligné et d'une extension significative de 2 lettres. Par exemple la langue française est désignée par <em>fr</em>, et le canadien-français par <em>fr_ca</em>. Si vous faites une version Unicode d'une traduction, ajoutez <em>_utf8</em> à la fin (par exemple <em>fr_utf8</em>).</p>

<p style="margin-left: 40px;">Ensuite, créez dans votre dossier un nouveau fichier "moodle.php" contenant les lignes suivantes :<br /><br />

<code>
&lt;?php <br />
$string['thischarset'] = 'iso-8859-1';<br />
$string['thisdirection'] = 'ltr';<br />
$string['thislanguage'] = 'new language pack';<br />
?>
</code>

<br /><br />
ou copiez le fichier <strong>moodle.php</strong> d'une autre langue dans votre nouveau dossier. Celui du dossier <strong>en</strong> est le plus actuel, mais peu importe puisque vous allez de toute façon le réécrire. Si vous choisissez de créer un nouveau fichier, vous aurez l'avantage de commencer avec un paquetage de langue complètement vide et propre.</p>

<p style="margin-left: 40px;">Vous êtes maintenant prêt à insérer les chaînes de caractères de votre langue ! Pour plus de détails voyez ci-dessous.</p>

<p style="margin-left: 40px;">Si vous créez une toute nouvelle langue, la première chaîne à modifier est celle dénommée <strong>thischarset</strong> dans le fichier <strong>moodle.php</strong>. Cette chaîne doit contenir un jeu de caractères (encodage) web valide pour votre langue. Après avoir modifié cette chaîne, enregistrez le fichier <strong>moodle.php</strong>, puis rechargez la page. Vous pouvez alors continuer à modifier les autres chaînes de caractères. </p>

<h2>Modification d'une langue existante</h2>

<h3 style="margin-left: 40px;">Effectuer de petits changements</h3>

<p style="margin-left: 80px;">Si vous voulez juste effectuer quelques petits aménagements dans l'interface pour mieux l'adapter à votre site, <strong>ne modifiez pas les paquetages de langue standards</strong> ! Si vous le faites, toutes vos modifications seront effacées lors de la prochaine mise à jour de Moodle que vous effectuerez.</p>

<p style="margin-left: 80px;">Utilisez plutôt les instructions ci-dessus pour créer un tout nouveau dossier de langue, et donnez pour valeur à la chaîne <strong>parentlanguage</strong> du fichier <strong>moodle.php</strong> le code de la langue la plus proche de la vôtre (la langue « mère »). Par exemple, une bonne dénomination pour une version française locale seraît « <em>fr_local</em> », et la chaîne <strong>parentlanguage</strong> auraît pour valeur <em>fr</em> ou <em>fr_ca</em>.</p>

<p style="margin-left: 80px;">Pour que chacun sur votre site puisse profiter des modifications, vous devrez sélectionner cette nouvelle langue comme langue du site par défaut et restreindre les langues disponibles dans la page  <strong>Administration -> Configuration -> Paramètres techniques</strong>.</p>

<h3 style="margin-left: 40px;">Traduire les fichiers de langue de Moodle (fichiers de chaînes de caractères)</h3>

<ol>

<li>Connectez-vous sur votre serveur Moodle en tant qu'administrateur.</li>

<li>Allez dans <strong>Administration -> Configuration -> Langue</strong>, qui est la page d'administration des langues. </li>

<li>Sur cette page, choisissez votre langue, puis cliquez sur « Comparer et modifier la langue active ».</li>

<li>Vous devriez maintenant voir un formulaire où vous pouvez modifier les chaînes du fichier <strong>moodle.php</strong>. Si ce n'est pas le cas, vous devrez vous assurez que les fichiers de langue peuvent être modifiés. Vous aurez peut-être à changer les droits de lecture et d'écriture sur ces fichiers.</li>

<li>Le formulaire comprend trois colonnes. La première est le nom de chaque chaîne, la deuxième la chaîne en anglais et la dernière sa traduction dans la langue actuelle.</li>

<li>Modifiez les chaînes manquantes, surlignées en couleur. N'oubliez pas de cliquer sur le bouton « Enregistrer: moodle.php » lorsque vous aurez terminé. Répétez ce processus pour les autres fichiers, que vous pouvez modifier en cliquant sur leur nom au sommet de la page.</li>

<li>Vous pouvez laisser des chaînes vides. Moodle utilisera dans ce cas la chaîne de la langue mère (parentlanguage). si vous n'avez pas défini la langue mère dans le fichier <strong>moodle.php</strong>, l'anglais sera utilisé par défaut.</li>

<li>Une façon rapide de voir toutes les chaînes manquantes est de cliquer sur « Vérifier les textes manquants ». N'écrivez rien dans les chaînes qui n'ont pas (encore) de traduction, sans quoi cet outil si pratique ne fonctionnera plus à satisfaction.</li>

</ol>

<h3 style="margin-left: 40px;">Traduire les fichiers d'aide et la documentation</h3>

<p style="margin-left: 80px;">Il n'y a pas encore d'éditeur intégré dans Moodle pour traduire les fichiers d'aide et la documentation, mais ce n'est pas vraiment difficile. Il est important d'utiliser la langue <strong>en</strong> comme langue de référence. Copiez un fichier d'aide de ce dossier au même endroit dans votre propre dossier de langue. Utilisez ensuite un éditeur de texte pour modifier le fichier, en vous assurant de ne pas modifier le code qu'il contient (en général des balises HTML). N'UTILISEZ PAS UN TRAITEMENT DE TEXTE pour modifier ou écrire ces fichiers. Ces programmes les font grossir inutilement !
<br />
<strong>Ne laissez pas de chaînes non traduites dans votre paquetage de langue !</strong></p>

<p style="margin-left: 80px;">Prenez la peine d'écrire des fichiers d'aide en conformité avec la norme XHTML. Ceci comprend notamment les points suivants :</p>

<ul style="margin-left: 80px;">

<li>toutes les balises ouvertes doivent être fermées : <span style="color:rgb(255, 0, 0);" >&lt;p></span>lalala<span style="color:rgb(255, 0, 0);" >&lt;/p></span></li>

<li>tous les éléments doivent être correctement imbriqués : <span style="color:rgb(255, 0, 0);" >&lt;p></span> lalala <span style="color:rgb(0, 0, 255);" >&lt;em></span>lalala<span style="color:rgb(0, 0, 255);" >&lt;/em></span> <span style="color:rgb(255, 0, 0);" >&lt;/p></span></li>

<li>tous les éléments et les attributs doivent être écrits en bas de casse (minuscules)</li>

<li>tous les attributs doivent être écrits en totalité et entre guillemets droits : <span style="color:rgb(255, 0, 0);" >&lt;p align="right"></span> lalala <span style="color:rgb(255, 0, 0);" >&lt;/p></span></li>

<li>les éléments vides doivent être terminés par /> : <span style="color:rgb(255, 0, 0);" >&lt;br /> &lt;hr /></span>. Il faut mettre un espace avant le caractère « / ».</li>

<li>chaque balise « img » doit comporter un attribut « alt="" » (qui peut être vide) et doit en outre être fermé par un espace et />, par exemple <span style="color:rgb(255, 0, 0);" >&lt;img alt="" src="photo.gif" /></span></li>

<li>les balises courtes du code PHP <span style="color:rgb(255, 0, 0);" >&lt;?=</span> et <span style="color:rgb(255, 0, 0);" >&lt;?</span> sont à retirer au profit de leur version normale <span style="color:rgb(255, 0, 0);" >&lt;?php</span></li>

<li>AUCUNE balise « font » ne doit figurer dans le code. Les balises <span style="color:rgb(255, 0, 0);" > &lt;p> &lt;em> &lt;h1> &lt;h2></span> etc. sont  suffisantes pour les paquetages de langues</li>

<li>le nom de la langue (indiqué dans la variable « $string['thislanguage'] » dans le fichier « moodle.php ») doit être dans la mesure du possible conforme au standard « Unicode Numeric Character References (NCR) », car ceci permet un affichage correct de ce nom dans TOUS les encodages (pour un exemple, voir la langue chinoise)</li>

</ul>

<p style="margin-left: 80px;">Aucun des fichiers du dossier « help » ne nécessite de description de document (doc type), ni des balises html, body, head (ouvrantes ou fermantes), car ces fichiers sont inclus à l'aide du fichier « help.php ». Le script se chargera de composer des pages formatées correctement. Cela signifie qu'il n'y a pas beaucoup d'opportunité de laisser libre cours à votre créativité ! Veuillez coller au plus près de l'exemple de la langue anglaise.</p>

<p style="margin-left: 80px;">Les fichiers du dossier « docs » doivent en revanche être en pleine conformité avec la norme XHTML, y compris la description de document (doc type), l'entête, etc.</p>

<p style="margin-left: 80px;">Si vous cliquez sur « Vérifier les textes manquant » dans la page d'administration des langues, une liste des fichiers manquant sera également affichée. En lieu et place des fichiers manquant, Moodle utilisera le paquetage de la langue mère (parentlanguage). Il ne faut donc pas laisser des copies non traduites des fichiers d'aide dans votre dossier de langue, sinon cet outil si pratique ne fonctionnera plus à satisfaction.</p>

<h2>Offrir votre dossier de langue au projet Moodle</h2>

<p style="margin-left: 40px;">En offrant votre traduction au projet Moodle, vous aiderez les autres personnes parlant votre langue. Votre langue sera en outre distribuée avec toutes les versions futures de Moodle.</p>

<p style="margin-left: 40px;">Compressez simplement votre dossier de langue complet en un fichier <strong>zip</strong> et envoyez-le à <a href="mailto:tra%6es%6ca%74%69o%6e%40%6d%6f%6f%64%6c%65.org">translation@moodle.org</a>.</p>

<p style="margin-left: 40px;">Nous vous communiquerons alors  tous les détails nécessaires.</p>

<p  style="margin-left: 40px;">Voici une liste de vérification à utiliser avant de proposer votre paquetage de langue :</p>

<ul type="circle" style="margin-left: 80px;">

<li>Aucun fichier vide ?</li>

<li>Aucun fichier ni aucune chaîne non traduite ?</li>

<li>Fichiers d'aide pas modifié avec un traitement de texte ?</li>

<li>Fichier README contenant une description de la langue, le nom et l'adresse de courriel du traducteur ?</li>

<li>Nom du dossier d'après le code de langue valable (vérification dans moodle\lib\languages.php) ?</li>

<li>Le paquetage de langue tournent sans erreur sur un Moodle de test ?</li>

<li>Lorsque la variable "thislanguage" contient des lettres avec diacritiques ou dans un autre alphabet que le romain, elle est écrite en notation NCR ?</li>

<li>Les chaînes et fichiers sont-ils conformes au format XHTML ?</li>

</ul>
  	 
<h2>Maintenance des paquetages de langue standards</h2>

<p style="margin-left: 40px;">Si vous vous êtes engagé dans la maintenance d'une langue dans Moodle, vous aurez intérêt à utiliser le <a href="?file=cvs.html">CVS de Moodle</a> afin d'avoir à disposition une version de Moodle toujours à jour et de pouvoir déposer vos modifications directement dans le projet Moodle.</p>

<p style="margin-left: 40px;">Pour être au courant des changements dans le projet, il est des plus judicieux de s'abonner à la <a href="http://sourceforge.net/mail/?group_id=30935" target="_top">liste de distribution CVS</a>. Cela vous aidera à garder votre traduction aussi proche du texte anglais que possible.</p>

<p style="margin-left: 40px;">Il vous faut en outre vous abonner au <a target="_top" href="http://moodle.org/mod/forum/view.php?id=43">Forum des langues de Moodle</a> (en anglais), où vous trouverez les nouveautés et des discussions sur les modifications ayant un impact sur la traduction.</p>

<p align="center"><font size="1"><a href="." target="_top">Documentation Moodle</a></font></p>
<p align="center"><font size="1">Version: $Id$</font></p>

</body>
</html>
